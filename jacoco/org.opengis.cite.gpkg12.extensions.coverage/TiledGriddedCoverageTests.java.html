<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TiledGriddedCoverageTests.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GeoPackage 1.2 Conformance Test Suite</a> &gt; <a href="index.source.html" class="el_package">org.opengis.cite.gpkg12.extensions.coverage</a> &gt; <span class="el_source">TiledGriddedCoverageTests.java</span></div><h1>TiledGriddedCoverageTests.java</h1><pre class="source lang-java linenums">package org.opengis.cite.gpkg12.extensions.coverage;

import static org.testng.Assert.assertTrue;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Collection;
import java.util.LinkedList;
import java.util.Spliterator;
import java.util.Spliterators;
import java.util.stream.Collectors;
import java.util.stream.StreamSupport;

import javax.imageio.ImageIO;
import javax.imageio.ImageReader;
import javax.imageio.stream.MemoryCacheImageInputStream;

import org.opengis.cite.gpkg12.ErrorMessage;
import org.opengis.cite.gpkg12.ErrorMessageKeys;
import org.opengis.cite.gpkg12.TileFixture;
import org.opengis.cite.gpkg12.util.DatabaseUtility;
import org.testng.Assert;
import org.testng.ITestContext;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;

/**
 * Defines test methods that apply to descriptive information about a GeoPackage's content
 * as it pertains to tiled, gridded coverage data.
 *
 * &lt;p style=&quot;margin-bottom: 0.5em&quot;&gt;
 * &lt;strong&gt;Sources&lt;/strong&gt;
 * &lt;/p&gt;
 * &lt;ul&gt;
 * &lt;li&gt;&lt;a href=&quot;http://docs.opengeospatial.org/is/17-066r1/17-066r1.html&quot; target=
 * &quot;_blank&quot;&gt; GeoPackage Extension for Tiled Gridded Coverage Data&lt;/a&gt; (OGC 17-066r1)&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * @author Jeff Yutzler
 */
public class TiledGriddedCoverageTests extends TileFixture {

<span class="fc" id="L47">	public TiledGriddedCoverageTests() {</span>
		// This allows all of the tiles tests to run on coverage data
<span class="fc" id="L49">		setDataType(&quot;2d-gridded-coverage&quot;);</span>
<span class="fc" id="L50">	}</span>

	@BeforeClass
	public void a_ValidateExtensionPresent(ITestContext testContext) throws SQLException {
<span class="fc" id="L54">		Assert.assertTrue(DatabaseUtility.doesTableOrViewExist(this.databaseConnection, &quot;gpkg_extensions&quot;),</span>
<span class="fc" id="L55">				ErrorMessage.format(ErrorMessageKeys.CONFORMANCE_CLASS_DISABLED, &quot;Coverage Extension&quot;));</span>

<span class="fc" id="L57">		try (final Statement statement1 = this.databaseConnection.createStatement();</span>
<span class="fc" id="L58">				ResultSet resultSet1 = statement1.executeQuery(</span>
						&quot;SELECT COUNT(*) FROM gpkg_extensions WHERE table_name = 'gpkg_2d_gridded_coverage_ancillary';&quot;);) {
<span class="fc" id="L60">			resultSet1.next();</span>
<span class="fc bfc" id="L61" title="All 2 branches covered.">			Assert.assertTrue(resultSet1.getInt(1) &gt; 0,</span>
<span class="fc" id="L62">					ErrorMessage.format(ErrorMessageKeys.CONFORMANCE_CLASS_DISABLED, &quot;Coverage Extension&quot;));</span>
		}
<span class="fc" id="L64">	}</span>

	/**
	 * Sets up variables used across methods, overrides TileTests
	 * @throws SQLException if there is a database error
	 */
	@BeforeClass
	public void setUp() throws SQLException {
<span class="pc bpc" id="L72" title="1 of 2 branches missed.">		if (!hasExtension) {</span>
<span class="fc" id="L73">			return;</span>
		}
		/*
		 * Test case {@code /extensions/coverage/table_val/gpkg_contents}
		 *
		 * @see &lt;a href=&quot;#r5&quot; target= &quot;_blank&quot;&gt;Tiled Gridded Coverage Data Extension -
		 * Requirement 5&lt;/a&gt;
		 */

<span class="nc" id="L82">		try (final Statement statement2 = this.databaseConnection.createStatement();</span>
<span class="nc" id="L83">				ResultSet resultSet2 = statement2</span>
<span class="nc" id="L84">					.executeQuery(&quot;SELECT table_name FROM gpkg_contents WHERE data_type = '2d-gridded-coverage';&quot;);) {</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">			while (resultSet2.next()) {</span>
<span class="nc" id="L86">				this.elevationTableNames.add(resultSet2.getString(&quot;table_name&quot;));</span>
			}
		}
<span class="nc" id="L89">	}</span>

	/**
	 * Test case {@code /extensions/coverage/table_def/gpkg_2d_gridded_coverage_ancillary}
	 *
	 * @see &lt;a href=&quot;#r1&quot; target= &quot;_blank&quot;&gt;Requirement 1&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 1&quot;)
	public void coverageAncillaryTableDefinition() throws SQLException {

		try (
				// 1
<span class="fc" id="L102">				final Statement statement = this.databaseConnection.createStatement();</span>

<span class="fc" id="L104">				final ResultSet resultSet = statement</span>
<span class="fc" id="L105">					.executeQuery(&quot;PRAGMA table_info('gpkg_2d_gridded_coverage_ancillary');&quot;);) {</span>
			// 2
<span class="fc" id="L107">			int passFlag = 0;</span>
<span class="fc" id="L108">			final int flagMask = 0b01111111;</span>

<span class="fc" id="L110">			checkPrimaryKey(&quot;gpkg_2d_gridded_coverage_ancillary&quot;, &quot;id&quot;, true);</span>

<span class="fc bfc" id="L112" title="All 2 branches covered.">			while (resultSet.next()) {</span>
				// 3
<span class="fc" id="L114">				final String name = resultSet.getString(&quot;name&quot;);</span>
<span class="fc bfc" id="L115" title="All 2 branches covered.">				if (&quot;id&quot;.equals(name)) {</span>
					// handled with checkPrimaryKey...
<span class="fc" id="L117">					passFlag |= 1;</span>
				}
<span class="fc bfc" id="L119" title="All 2 branches covered.">				else if (&quot;tile_matrix_set_name&quot;.equals(name)) {</span>
<span class="fc" id="L120">					assertTrue(&quot;TEXT&quot;.equals(resultSet.getString(&quot;type&quot;)), ErrorMessage</span>
<span class="fc" id="L121">						.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;tile_matrix_set_name type&quot;));</span>
<span class="pc bpc" id="L122" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 1, ErrorMessage</span>
<span class="fc" id="L123">						.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;tile_matrix_set_name notnull&quot;));</span>
<span class="fc" id="L124">					passFlag |= (1 &lt;&lt; 1);</span>
				}
<span class="fc bfc" id="L126" title="All 2 branches covered.">				else if (&quot;datatype&quot;.equals(name)) {</span>
<span class="fc" id="L127">					assertTrue(&quot;TEXT&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L128">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;datatype type&quot;));</span>
<span class="pc bpc" id="L129" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 1, ErrorMessage</span>
<span class="fc" id="L130">						.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;datatype notnull&quot;));</span>
<span class="fc" id="L131">					final String def = resultSet.getString(&quot;dflt_value&quot;);</span>
<span class="pc bpc" id="L132" title="2 of 4 branches missed.">					assertTrue(&quot;integer&quot;.equals(def) || &quot;'integer'&quot;.equals(def), ErrorMessage</span>
<span class="fc" id="L133">						.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;datatype default&quot;));</span>
<span class="fc" id="L134">					passFlag |= (1 &lt;&lt; 2);</span>
<span class="fc" id="L135">				}</span>
<span class="fc bfc" id="L136" title="All 2 branches covered.">				else if (&quot;scale&quot;.equals(name)) {</span>
<span class="fc" id="L137">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L138">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;scale type&quot;));</span>
<span class="pc bpc" id="L139" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 1,</span>
<span class="fc" id="L140">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;scale notnull&quot;));</span>
<span class="pc bpc" id="L141" title="1 of 2 branches missed.">					assertTrue(resultSet.getFloat(&quot;dflt_value&quot;) == 1.0,</span>
<span class="fc" id="L142">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;scale default&quot;));</span>
<span class="fc" id="L143">					passFlag |= (1 &lt;&lt; 3);</span>
				}
<span class="fc bfc" id="L145" title="All 2 branches covered.">				else if (&quot;offset&quot;.equals(name)) {</span>
<span class="fc" id="L146">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L147">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;offset type&quot;));</span>
<span class="pc bpc" id="L148" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 1,</span>
<span class="fc" id="L149">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;offset notnull&quot;));</span>
<span class="pc bpc" id="L150" title="1 of 2 branches missed.">					assertTrue(resultSet.getFloat(&quot;dflt_value&quot;) == 0,</span>
<span class="fc" id="L151">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;offset default&quot;));</span>
<span class="fc" id="L152">					passFlag |= (1 &lt;&lt; 4);</span>
				}
<span class="fc bfc" id="L154" title="All 2 branches covered.">				else if (&quot;precision&quot;.equals(name)) {</span>
<span class="fc" id="L155">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L156">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;precision type&quot;));</span>
<span class="pc bpc" id="L157" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 0,</span>
<span class="fc" id="L158">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;precision type&quot;));</span>
<span class="pc bpc" id="L159" title="1 of 2 branches missed.">					assertTrue(resultSet.getFloat(&quot;dflt_value&quot;) == 1.0, ErrorMessage</span>
<span class="fc" id="L160">						.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;precision default&quot;));</span>
<span class="fc" id="L161">					passFlag |= (1 &lt;&lt; 5);</span>
				}
<span class="fc bfc" id="L163" title="All 2 branches covered.">				else if (&quot;data_null&quot;.equals(name)) {</span>
<span class="fc" id="L164">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L165">							ErrorMessage.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;data_null type&quot;));</span>
<span class="pc bpc" id="L166" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 0, ErrorMessage</span>
<span class="fc" id="L167">						.format(ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID, &quot;data_null notnull&quot;));</span>
<span class="fc" id="L168">					passFlag |= (1 &lt;&lt; 6);</span>
				}
<span class="fc" id="L170">			}</span>
<span class="pc bpc" id="L171" title="1 of 2 branches missed.">			assertTrue((passFlag &amp; flagMask) == flagMask, ErrorMessageKeys.COVERAGE_ANCILLARY_COLUMNS_INVALID);</span>
		}
<span class="fc" id="L173">	}</span>

	/**
	 * Test case {@code /extensions/coverage/table_def/gpkg_2d_gridded_tile_ancillary}
	 *
	 * @see &lt;a href=&quot;#r2&quot; target= &quot;_blank&quot;&gt;Requirement 2&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 2&quot;)
	public void tileAncillaryTableDefinition() throws SQLException {
		try (
				// 1
<span class="fc" id="L185">				final Statement statement = this.databaseConnection.createStatement();</span>

<span class="fc" id="L187">				final ResultSet resultSet = statement</span>
<span class="fc" id="L188">					.executeQuery(&quot;PRAGMA table_info('gpkg_2d_gridded_tile_ancillary');&quot;);) {</span>

			// 2
<span class="fc" id="L191">			long passFlag = 0;</span>
<span class="fc" id="L192">			final long flagMask = 0b111111111;</span>

<span class="fc bfc" id="L194" title="All 2 branches covered.">			while (resultSet.next()) {</span>
<span class="fc" id="L195">				checkPrimaryKey(&quot;gpkg_2d_gridded_tile_ancillary&quot;, &quot;id&quot;, true);</span>
				// 3
<span class="fc" id="L197">				final String name = resultSet.getString(&quot;name&quot;);</span>
<span class="fc bfc" id="L198" title="All 2 branches covered.">				if (&quot;id&quot;.equals(name)) {</span>
					// handled with checkPrimaryKey...
<span class="fc" id="L200">					passFlag |= 1;</span>
				}
<span class="fc bfc" id="L202" title="All 2 branches covered.">				else if (&quot;tpudt_name&quot;.equals(name)) {</span>
<span class="fc" id="L203">					assertTrue(&quot;TEXT&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L204">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;tpudt_name type&quot;));</span>
<span class="pc bpc" id="L205" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 1,</span>
<span class="fc" id="L206">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;tpudt_name notnull&quot;));</span>
<span class="fc" id="L207">					passFlag |= (1 &lt;&lt; 1);</span>
				}
<span class="fc bfc" id="L209" title="All 2 branches covered.">				else if (&quot;tpudt_id&quot;.equals(name)) {</span>
<span class="fc" id="L210">					assertTrue(&quot;INTEGER&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L211">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;tpudt_id type&quot;));</span>
<span class="pc bpc" id="L212" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 1,</span>
<span class="fc" id="L213">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;tpudt_id notnull&quot;));</span>
<span class="fc" id="L214">					passFlag |= (1 &lt;&lt; 2);</span>
				}
<span class="fc bfc" id="L216" title="All 2 branches covered.">				else if (&quot;scale&quot;.equals(name)) {</span>
<span class="fc" id="L217">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L218">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;scale type&quot;));</span>
<span class="pc bpc" id="L219" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 1,</span>
<span class="fc" id="L220">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;scale notnull&quot;));</span>
<span class="pc bpc" id="L221" title="1 of 2 branches missed.">					assertTrue(resultSet.getFloat(&quot;dflt_value&quot;) == 1.0,</span>
<span class="fc" id="L222">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;scale default&quot;));</span>
<span class="fc" id="L223">					passFlag |= (1 &lt;&lt; 3);</span>
				}
<span class="fc bfc" id="L225" title="All 2 branches covered.">				else if (&quot;offset&quot;.equals(name)) {</span>
<span class="fc" id="L226">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L227">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;offset type&quot;));</span>
<span class="pc bpc" id="L228" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 1,</span>
<span class="fc" id="L229">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;offset notnull&quot;));</span>
<span class="pc bpc" id="L230" title="1 of 2 branches missed.">					assertTrue(resultSet.getFloat(&quot;dflt_value&quot;) == 0,</span>
<span class="fc" id="L231">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;offset default&quot;));</span>
<span class="fc" id="L232">					passFlag |= (1 &lt;&lt; 4);</span>
				}
<span class="fc bfc" id="L234" title="All 2 branches covered.">				else if (&quot;min&quot;.equals(name)) {</span>
<span class="fc" id="L235">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L236">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;precision type&quot;));</span>
<span class="pc bpc" id="L237" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 0,</span>
<span class="fc" id="L238">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;precision type&quot;));</span>
<span class="fc" id="L239">					passFlag |= (1 &lt;&lt; 5);</span>
				}
<span class="fc bfc" id="L241" title="All 2 branches covered.">				else if (&quot;max&quot;.equals(name)) {</span>
<span class="fc" id="L242">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L243">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;data_null type&quot;));</span>
<span class="pc bpc" id="L244" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 0,</span>
<span class="fc" id="L245">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;data_null notnull&quot;));</span>
<span class="fc" id="L246">					passFlag |= (1 &lt;&lt; 6);</span>
				}
<span class="fc bfc" id="L248" title="All 2 branches covered.">				else if (&quot;mean&quot;.equals(name)) {</span>
<span class="fc" id="L249">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L250">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;mean type&quot;));</span>
<span class="pc bpc" id="L251" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 0,</span>
<span class="fc" id="L252">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;mean type&quot;));</span>
<span class="fc" id="L253">					passFlag |= (1 &lt;&lt; 7);</span>
				}
<span class="pc bpc" id="L255" title="1 of 2 branches missed.">				else if (&quot;std_dev&quot;.equals(name)) {</span>
<span class="fc" id="L256">					assertTrue(&quot;REAL&quot;.equals(resultSet.getString(&quot;type&quot;)),</span>
<span class="fc" id="L257">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;std_dev type&quot;));</span>
<span class="pc bpc" id="L258" title="1 of 2 branches missed.">					assertTrue(resultSet.getInt(&quot;notnull&quot;) == 0,</span>
<span class="fc" id="L259">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID, &quot;std_dev notnull&quot;));</span>
<span class="fc" id="L260">					passFlag |= (1 &lt;&lt; 8);</span>
				}
<span class="fc" id="L262">			}</span>
<span class="pc bpc" id="L263" title="1 of 2 branches missed.">			assertTrue((passFlag &amp; flagMask) == flagMask,</span>
<span class="fc" id="L264">					ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_COLUMNS_INVALID,</span>
<span class="fc" id="L265">							String.format(&quot;Missing column flag %d&quot;, passFlag)));</span>
		}
<span class="fc" id="L267">	}</span>

	/**
	 * Test case {@code /extensions/coverage/table_val/gpkg_spatial_ref_sys/rows}
	 *
	 * @see &lt;a href=&quot;#r3&quot; target= &quot;_blank&quot;&gt;Requirement 3&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 3&quot;)
	public void requiredSRSRows() throws SQLException {
<span class="fc" id="L277">		try (final Statement statement = this.databaseConnection.createStatement();</span>
<span class="fc" id="L278">				final ResultSet srsDefaultValue = statement.executeQuery(</span>
						&quot;SELECT COUNT(*) FROM gpkg_spatial_ref_sys WHERE organization_coordsys_id = 4979 AND (organization = 'EPSG' OR organization = 'epsg');&quot;);) {
<span class="pc bpc" id="L280" title="1 of 2 branches missed.">			assertTrue(srsDefaultValue.getInt(1) &gt; 0, ErrorMessage.format(ErrorMessageKeys.NO_ELEVATION_SRS));</span>
		}
<span class="fc" id="L282">	}</span>

	/**
	 * Test case {@code /opt/extensions/coverage/srs/required_references}
	 *
	 * @see &lt;a href=&quot;#r4&quot; target= &quot;_blank&quot;&gt;Requirement 4&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 4&quot;)
	public void requiredSRSReferences() throws SQLException {
<span class="pc bpc" id="L292" title="1 of 2 branches missed.">		for (final String tableName : this.elevationTableNames) {</span>
<span class="nc" id="L293">			try (final Statement statement1 = this.databaseConnection.createStatement();</span>
<span class="nc" id="L294">					final ResultSet resultSet1 = statement1.executeQuery(String</span>
<span class="nc" id="L295">						.format(&quot;SELECT srs_id FROM gpkg_tile_matrix_set WHERE table_name = '%s'&quot;, tableName));) {</span>
<span class="nc" id="L296">				resultSet1.next();</span>
<span class="nc" id="L297">				final String srsID = resultSet1.getString(1);</span>
<span class="nc" id="L298">				try (final Statement statement2 = this.databaseConnection.createStatement();</span>
<span class="nc" id="L299">						final ResultSet resultSet2 = statement2.executeQuery(String</span>
<span class="nc" id="L300">							.format(&quot;SELECT COUNT(*) FROM gpkg_spatial_ref_sys WHERE srs_id = '%s'&quot;, srsID));) {</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">					assertTrue(resultSet2.getInt(1) == 1,</span>
<span class="nc" id="L302">							ErrorMessage.format(ErrorMessageKeys.BAD_MATRIX_SET_SRS_REFERENCE, srsID));</span>
				}
			}
<span class="nc" id="L305">		}</span>
<span class="fc" id="L306">	}</span>

	/**
	 * Test case {@code /extensions/coverage/table_val/gpkg_extensions}
	 *
	 * @see &lt;a href=&quot;#r6&quot; target= &quot;_blank&quot;&gt;Requirement 6&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 6&quot;)
	public void extensionTableRows() throws SQLException {
		try (
				// 1
<span class="fc" id="L318">				final Statement statement = this.databaseConnection.createStatement();</span>

<span class="fc" id="L320">				final ResultSet resultSet = statement.executeQuery(</span>
						&quot;SELECT table_name, column_name, extension_name, definition, scope from gpkg_extensions&quot;);) {
			// 2
<span class="fc" id="L323">			long passFlag = 0;</span>
<span class="fc" id="L324">			final long flagMask = 0b11;</span>

<span class="fc bfc" id="L326" title="All 2 branches covered.">			while (resultSet.next()) {</span>
				// 3
<span class="fc" id="L328">				final String name = resultSet.getString(&quot;table_name&quot;);</span>
<span class="fc bfc" id="L329" title="All 2 branches covered.">				if (&quot;gpkg_2d_gridded_coverage_ancillary&quot;.equals(name)) {</span>
<span class="pc bpc" id="L330" title="1 of 2 branches missed.">					if ((resultSet.getObject(&quot;column_name&quot;) == null)</span>
<span class="pc bpc" id="L331" title="1 of 2 branches missed.">							&amp;&amp; &quot;gpkg_2d_gridded_coverage&quot;.equals(resultSet.getString(&quot;extension_name&quot;))</span>
							&amp;&amp; &quot;http://docs.opengeospatial.org/is/17-066r1/17-066r1.html&quot;
<span class="pc bpc" id="L333" title="1 of 2 branches missed.">								.equals(resultSet.getString(&quot;definition&quot;))</span>
<span class="pc bpc" id="L334" title="1 of 2 branches missed.">							&amp;&amp; &quot;read-write&quot;.equals(resultSet.getString(&quot;scope&quot;))) {</span>
<span class="fc" id="L335">						passFlag |= 1;</span>
					}
				}
<span class="fc bfc" id="L338" title="All 2 branches covered.">				else if (&quot;gpkg_2d_gridded_tile_ancillary&quot;.equals(name)) {</span>
<span class="pc bpc" id="L339" title="1 of 2 branches missed.">					if ((resultSet.getObject(&quot;column_name&quot;) == null)</span>
<span class="pc bpc" id="L340" title="1 of 2 branches missed.">							&amp;&amp; &quot;gpkg_2d_gridded_coverage&quot;.equals(resultSet.getString(&quot;extension_name&quot;))</span>
							&amp;&amp; &quot;http://docs.opengeospatial.org/is/17-066r1/17-066r1.html&quot;
<span class="pc bpc" id="L342" title="1 of 2 branches missed.">								.equals(resultSet.getString(&quot;definition&quot;))</span>
<span class="pc bpc" id="L343" title="1 of 2 branches missed.">							&amp;&amp; &quot;read-write&quot;.equals(resultSet.getString(&quot;scope&quot;))) {</span>
<span class="fc" id="L344">						passFlag |= (1 &lt;&lt; 1);</span>
					}
				}
<span class="fc" id="L347">			}</span>
<span class="pc bpc" id="L348" title="1 of 2 branches missed.">			assertTrue((passFlag &amp; flagMask) == flagMask,</span>
<span class="fc" id="L349">					ErrorMessage.format(ErrorMessageKeys.ELEVATION_EXTENSION_ROWS_MISSING,</span>
<span class="fc" id="L350">							String.format(&quot;Missing column flag %d&quot;, passFlag)));</span>
		}

<span class="pc bpc" id="L353" title="1 of 2 branches missed.">		for (final String tableName : this.elevationTableNames) {</span>
<span class="nc" id="L354">			try (final Statement statement1 = this.databaseConnection.createStatement();</span>
<span class="nc" id="L355">					final ResultSet resultSet1 = statement1.executeQuery(String.format(</span>
							&quot;SELECT column_name, definition, scope from gpkg_extensions WHERE extension_name = 'gpkg_2d_gridded_coverage' AND table_name = '%s'&quot;,
							tableName));) {
<span class="nc" id="L358">				assertTrue(</span>
<span class="nc bnc" id="L359" title="All 4 branches missed.">						resultSet1.next() &amp;&amp; &quot;tile_data&quot;.equals(resultSet1.getObject(&quot;column_name&quot;))</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">								&amp;&amp; &quot;gpkg_2d_gridded_coverage&quot;.equals(resultSet1.getString(&quot;extension_name&quot;))</span>
								&amp;&amp; &quot;http://docs.opengeospatial.org/is/17-066r1/17-066r1.html&quot;
<span class="nc bnc" id="L362" title="All 2 branches missed.">									.equals(resultSet1.getString(&quot;definition&quot;))</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">								&amp;&amp; &quot;read-write&quot;.equals(resultSet1.getString(&quot;scope&quot;)),</span>
						ErrorMessageKeys.ELEVATION_EXTENSION_ROWS_MISSING);
			}
<span class="nc" id="L366">		}</span>
<span class="fc" id="L367">	}</span>

	/**
	 * Test case
	 * {@code /extensions/coverage/table_ref/gpkg_contents/gpkg_2d_gridded_coverage_ancillary}
	 *
	 * @see &lt;a href=&quot;#r7&quot; target= &quot;_blank&quot;&gt;Requirement 7&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 7&quot;)
	public void coverageAncillaryValues() throws SQLException {

<span class="pc bpc" id="L379" title="1 of 2 branches missed.">		for (final String tableName : this.elevationTableNames) {</span>
<span class="nc" id="L380">			try (final Statement statement1 = this.databaseConnection.createStatement();</span>
<span class="nc" id="L381">					final ResultSet resultSet1 = statement1.executeQuery(String.format(</span>
							&quot;SELECT COUNT(*) FROM gpkg_2d_gridded_coverage_ancillary WHERE tile_matrix_set_name = '%s'&quot;,
							tableName));) {
<span class="nc" id="L384">				resultSet1.next();</span>
<span class="nc bnc" id="L385" title="All 2 branches missed.">				assertTrue(resultSet1.getInt(1) == 1, ErrorMessage.format(ErrorMessageKeys.MISSING_REFERENCE,</span>
						&quot;gpkg_2d_gridded_coverage_ancillary&quot;, &quot;tile_matrix_set_name&quot;, tableName));
			}
<span class="nc" id="L388">		}</span>
<span class="fc" id="L389">	}</span>

	/**
	 * Test case
	 * {@code /extensions/coverage/table_ref/gpkg_2d_gridded_coverage_ancillary/gpkg_tile_matrix_set}
	 *
	 * @see &lt;a href=&quot;#r8&quot; target= &quot;_blank&quot;&gt;Requirement 8&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 8&quot;)
	public void coverageAncillarySetName() throws SQLException {
		try (
				// 1
<span class="fc" id="L402">				final Statement statement = this.databaseConnection.createStatement();</span>

<span class="fc" id="L404">				final ResultSet resultSet = statement</span>
<span class="fc" id="L405">					.executeQuery(&quot;SELECT tile_matrix_set_name FROM 'gpkg_2d_gridded_coverage_ancillary';&quot;);) {</span>
			// 2
<span class="fc bfc" id="L407" title="All 2 branches covered.">			while (resultSet.next()) {</span>
				// 3
<span class="fc" id="L409">				final String tileMatrixSetName = resultSet.getString(1);</span>
<span class="fc" id="L410">				try (final Statement statement2 = this.databaseConnection.createStatement();</span>

<span class="fc" id="L412">						final ResultSet resultSet2 = statement2.executeQuery(</span>
<span class="fc" id="L413">								String.format(&quot;SELECT count(*) FROM gpkg_tile_matrix_set WHERE table_name = '%s';&quot;,</span>
										tileMatrixSetName));) {
<span class="pc bpc" id="L415" title="1 of 2 branches missed.">					assertTrue(resultSet2.getInt(1) == 1, ErrorMessageKeys.UNREFERENCED_COVERAGE_TILE_MATRIX_SET_TABLE);</span>
				}
<span class="fc" id="L417">			}</span>
		}
<span class="fc" id="L419">	}</span>

	/**
	 * Test case {@code /extensions/coverage/table_val/gpkg_2d_gridded_coverage_ancillary}
	 *
	 * @see &lt;a href=&quot;#r9&quot; target= &quot;_blank&quot;&gt;Requirement 9&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 9&quot;)
	public void coverageAncillaryDatatype() throws SQLException {
		try (
				// 1
<span class="fc" id="L431">				final Statement statement = this.databaseConnection.createStatement();</span>

<span class="fc" id="L433">				final ResultSet resultSet = statement.executeQuery(</span>
						&quot;SELECT tile_matrix_set_name, datatype, scale, offset FROM 'gpkg_2d_gridded_coverage_ancillary';&quot;);) {
			// 2
<span class="fc bfc" id="L436" title="All 2 branches covered.">			while (resultSet.next()) {</span>
<span class="fc" id="L437">				final String setName = resultSet.getString(&quot;tile_matrix_set_name&quot;);</span>
<span class="pc bpc" id="L438" title="1 of 2 branches missed.">				if (!elevationTableNames.contains(setName)) {</span>
<span class="fc" id="L439">					continue;</span>
				}
				// 2a
<span class="nc" id="L442">				final String datatype = resultSet.getString(&quot;datatype&quot;);</span>
<span class="nc bnc" id="L443" title="All 4 branches missed.">				assertTrue(&quot;integer&quot;.equals(datatype) || &quot;float&quot;.equals(datatype),</span>
						ErrorMessageKeys.COVERAGE_ANCILLARY_DATATYPE_INVALID);

<span class="nc bnc" id="L446" title="All 2 branches missed.">				if (&quot;float&quot;.equals(datatype)) {</span>
<span class="nc" id="L447">					final double scale = resultSet.getDouble(&quot;scale&quot;);</span>
<span class="nc" id="L448">					final double offset = resultSet.getDouble(&quot;offset&quot;);</span>
					// 2b
<span class="nc bnc" id="L450" title="All 2 branches missed.">					assertTrue(scale == 1.0,</span>
<span class="nc" id="L451">							ErrorMessage.format(ErrorMessageKeys.ILLEGAL_VALUE, &quot;gpkg_2d_gridded_coverage_ancillary&quot;,</span>
<span class="nc" id="L452">									&quot;datatype&quot;, &quot;float&quot;, &quot;scale&quot;, &quot;1.0&quot;, Double.toString(scale), &quot;tile_matrix_set_name&quot;,</span>
									setName));
					// 2c
<span class="nc bnc" id="L455" title="All 2 branches missed.">					assertTrue(offset == 0.0,</span>
<span class="nc" id="L456">							ErrorMessage.format(ErrorMessageKeys.ILLEGAL_VALUE, &quot;gpkg_2d_gridded_coverage_ancillary&quot;,</span>
<span class="nc" id="L457">									&quot;datatype&quot;, &quot;float&quot;, &quot;offset&quot;, &quot;0.0&quot;, Double.toString(offset),</span>
									&quot;tile_matrix_set_name&quot;, setName));
				}
<span class="nc" id="L460">			}</span>
		}
<span class="fc" id="L462">	}</span>

	/**
	 * Test case
	 * {@code /extensions/coverage/table_ref/tpudt/gpkg_2d_gridded_tile_ancillary}
	 *
	 * @see &lt;a href=&quot;#10&quot; target= &quot;_blank&quot;&gt;Requirement 10, 12&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirements 10, 12&quot;)
	public void tileAncillaryTableRef() throws SQLException {
		// 1
<span class="pc bpc" id="L474" title="1 of 2 branches missed.">		for (final String tableName : this.elevationTableNames) {</span>
<span class="nc" id="L475">			try (final Statement statement1 = this.databaseConnection.createStatement();</span>
<span class="nc" id="L476">					final ResultSet resultSet1 = statement1</span>
<span class="nc" id="L477">						.executeQuery(String.format(&quot;SELECT id FROM %s&quot;, tableName));) {</span>
<span class="nc bnc" id="L478" title="All 2 branches missed.">				while (resultSet1.next()) {</span>
<span class="nc" id="L479">					try (final Statement statement2 = this.databaseConnection.createStatement();</span>
<span class="nc" id="L480">							final ResultSet resultSet2 = statement2.executeQuery(</span>
									&quot;SELECT %s.id as tid, gpkg_2d_gridded_tile_ancillary.tpudt_id as taid from %s LEFT OUTER JOIN gpkg_2d_gridded_tile_ancillary ON %s.id = gpkg_2d_gridded_tile_ancillary.tpudt_id AND gpkg_2d_gridded_tile_ancillary.tpudt_name = '%s'&quot;
<span class="nc" id="L482">										.replace(&quot;%s&quot;, tableName));) {</span>
<span class="nc bnc" id="L483" title="All 2 branches missed.">						while (resultSet2.next()) {</span>
<span class="nc" id="L484">							final String id = resultSet2.getString(1);</span>
<span class="nc" id="L485">							resultSet2.getString(2);</span>
<span class="nc bnc" id="L486" title="All 2 branches missed.">							assertTrue(!resultSet2.wasNull(),</span>
<span class="nc" id="L487">									ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_REFERENCES, tableName, id));</span>
<span class="nc" id="L488">						}</span>

					}
				}
			}
<span class="nc" id="L493">		}</span>
<span class="fc" id="L494">	}</span>

	/**
	 * Test case {@code /extensions/coverage/table_val/gpkg_2d_gridded_tile_ancillary}
	 *
	 * @see &lt;a href=&quot;#11&quot; target= &quot;_blank&quot;&gt;Requirement 11&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 */
	@Test(description = &quot;See OGC 17-066r1: Requirement 11&quot;)
	public void tileAncillaryTableVal() throws SQLException {
		try (
				// 1
<span class="fc" id="L506">				final Statement statement1 = this.databaseConnection.createStatement();</span>
<span class="fc" id="L507">				final ResultSet resultSet1 = statement1</span>
<span class="fc" id="L508">					.executeQuery(&quot;SELECT tpudt_name, scale, offset FROM gpkg_2d_gridded_tile_ancillary;&quot;);) {</span>
			// 2
<span class="fc bfc" id="L510" title="All 2 branches covered.">			while (resultSet1.next()) {</span>
<span class="fc" id="L511">				final String tableName = resultSet1.getString(&quot;tpudt_name&quot;);</span>
<span class="fc" id="L512">				try (final Statement statement2 = this.databaseConnection.createStatement();</span>
						// 2a
<span class="fc" id="L514">						final ResultSet resultSet2 = statement2</span>
<span class="fc" id="L515">							.executeQuery(String.format(&quot;PRAGMA table_info(%s)&quot;, tableName));) {</span>
					// 2b
<span class="fc" id="L517">					assertTrue(resultSet2.next(),</span>
<span class="fc" id="L518">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_TABLE_REF_INVALID, tableName));</span>
				}
				try (
						// 2c
<span class="fc" id="L522">						final Statement statement3 = this.databaseConnection.createStatement();</span>
<span class="fc" id="L523">						final ResultSet resultSet3 = statement3.executeQuery(String.format(</span>
								&quot;SELECT datatype from gpkg_2d_gridded_coverage_ancillary WHERE tile_matrix_set_name = '%s'&quot;,
								tableName));) {
					// 2d
<span class="fc" id="L527">					assertTrue(resultSet3.next(),</span>
<span class="fc" id="L528">							ErrorMessage.format(ErrorMessageKeys.TILE_ANCILLARY_TABLE_REF_INVALID, tableName));</span>
<span class="fc" id="L529">					final String datatype = resultSet3.getString(&quot;datatype&quot;);</span>
<span class="fc bfc" id="L530" title="All 2 branches covered.">					if (&quot;float&quot;.equals(datatype)) {</span>
<span class="fc" id="L531">						final double scale = resultSet1.getDouble(&quot;scale&quot;);</span>
<span class="fc" id="L532">						final double offset = resultSet1.getDouble(&quot;offset&quot;);</span>
						// 2e
<span class="pc bpc" id="L534" title="1 of 2 branches missed.">						assertTrue(scale == 1.0,</span>
<span class="fc" id="L535">								ErrorMessage.format(ErrorMessageKeys.ILLEGAL_VALUE, &quot;gpkg_2d_gridded_tile_ancillary&quot;,</span>
<span class="fc" id="L536">										&quot;datatype&quot;, &quot;float&quot;, &quot;scale&quot;, &quot;1.0&quot;, Double.toString(scale), &quot;tpudt_name&quot;,</span>
										tableName));
						// 2f
<span class="pc bpc" id="L539" title="1 of 2 branches missed.">						assertTrue(offset == 0.0,</span>
<span class="fc" id="L540">								ErrorMessage.format(ErrorMessageKeys.ILLEGAL_VALUE, &quot;gpkg_2d_gridded_tile_ancillary&quot;,</span>
<span class="fc" id="L541">										&quot;datatype&quot;, &quot;float&quot;, &quot;offset&quot;, &quot;0.0&quot;, Double.toString(offset), &quot;tpudt_name&quot;,</span>
										tableName));
					}
				}
<span class="fc" id="L545">			}</span>
		}
<span class="fc" id="L547">	}</span>

	/**
	 * For data where the datatype column of the corresponding row in the
	 * gpkg_2d_gridded_coverage_ancillary table is integer, the tile_data BLOB in the tile
	 * pyramid user data table containing tiled, gridded coverage data SHALL be of MIME
	 * type image/png and the data SHALL be 16-bit unsigned integer (single channel -
	 * &quot;greyscale&quot;). For data where the datatype column of the corresponding row in the
	 * gpkg_2d_gridded_coverage_ancillary table is float, the tile_data BLOB in the tile
	 * pyramid user data table containing tiled, gridded coverage data SHALL be of MIME
	 * type image/tiff and the data SHALL be 32-bit floating point as described by the
	 * TIFF Encoding (Requirement 13/14).
	 *
	 * Test case {@code /extensions/coverage/table_val/tile-pyramid-user-data-tables}
	 *
	 * @see &lt;a href=&quot;#r13&quot; target=&quot;_blank&quot;&gt;MIME Type PNG or TIFF - Requirement 13/14&lt;/a&gt;
	 * @throws SQLException If an SQL query causes an error
	 * @throws IOException If the bytes of an image cause an error when read
	 */
	@Test(description = &quot;See OGC 12-128r12: Requirement 13/14&quot;)
	public void imageFormat() throws SQLException, IOException {
		// 1, 2
<span class="pc bpc" id="L569" title="1 of 2 branches missed.">		for (final String tableName : this.elevationTableNames) {</span>
<span class="nc" id="L570">			final Collection&lt;Integer&gt; failedTileIds = new LinkedList&lt;&gt;();</span>
			try (
					// 2a
<span class="nc" id="L573">					final Statement statement = this.databaseConnection.createStatement();</span>
<span class="nc" id="L574">					final ResultSet resultSet = statement.executeQuery(</span>
							&quot;SELECT t.datatype AS datatype, u.id AS id, u.tile_data AS tile_data FROM gpkg_2d_gridded_coverage_ancillary t, %s u WHERE t.tile_matrix_set_name = '%s';&quot;
<span class="nc" id="L576">								.replace(&quot;%s&quot;, tableName));) {</span>
				// 2b
<span class="nc bnc" id="L578" title="All 2 branches missed.">				while (resultSet.next()) {</span>
<span class="nc" id="L579">					final String datatype = resultSet.getString(&quot;datatype&quot;);</span>
<span class="nc" id="L580">					final int id = resultSet.getInt(&quot;id&quot;);</span>

<span class="nc" id="L582">					try (final MemoryCacheImageInputStream cacheImage = new MemoryCacheImageInputStream(</span>
<span class="nc" id="L583">							new ByteArrayInputStream(resultSet.getBytes(&quot;tile_data&quot;)))) {</span>
						// 2bi
<span class="nc bnc" id="L585" title="All 2 branches missed.">						if (&quot;float&quot;.equals(datatype)) {</span>
<span class="nc bnc" id="L586" title="All 2 branches missed.">							if (!canReadImage(tiffImageReaders, cacheImage)) {</span>
<span class="nc" id="L587">								failedTileIds.add(id);</span>
							}
							// 2bii
						}
<span class="nc bnc" id="L591" title="All 2 branches missed.">						else if (&quot;integer&quot;.equals(datatype)) {</span>
<span class="nc bnc" id="L592" title="All 2 branches missed.">							if (!canReadImage(pngImageReaders, cacheImage)) {</span>
<span class="nc" id="L593">								failedTileIds.add(id);</span>
							}
						}
					}
					;
<span class="nc" id="L598">				}</span>
			}

<span class="nc" id="L601">			assertTrue(failedTileIds.isEmpty(), ErrorMessage.format(ErrorMessageKeys.INVALID_IMAGE_FORMAT, tableName,</span>
<span class="nc" id="L602">					failedTileIds.stream().map(Object::toString).collect(Collectors.joining(&quot;, &quot;))));</span>
<span class="nc" id="L603">		}</span>
<span class="fc" id="L604">	}</span>

	// TODO: I don't know how to test R134 - R139

	protected static final Collection&lt;ImageReader&gt; tiffImageReaders;
	static {
<span class="fc" id="L610">		tiffImageReaders = StreamSupport</span>
<span class="fc" id="L611">			.stream(Spliterators.spliteratorUnknownSize(ImageIO.getImageReadersByMIMEType(&quot;image/tiff&quot;),</span>
					Spliterator.ORDERED), false)
<span class="fc" id="L613">			.collect(Collectors.toCollection(ArrayList::new));</span>

<span class="fc" id="L615">	}</span>

<span class="fc" id="L617">	private boolean hasExtension = false;</span>

<span class="fc" id="L619">	private final Collection&lt;String&gt; elevationTableNames = new ArrayList&lt;&gt;();</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>